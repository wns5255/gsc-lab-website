<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>지도 타입 바꾸기2</title>
    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=4bb276d241fb320936df581512dc8f62"></script>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* 스크롤 방지 */
        }
        #map {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <!-- <p>
        <input type="checkbox" id="chkUseDistrict" onclick="setOverlayMapTypeId()" /> 지적편집도 정보 보기
        <input type="checkbox" id="chkTerrain" onclick="setOverlayMapTypeId()" /> 지형정보 보기
        <input type="checkbox" id="chkTraffic" onclick="setOverlayMapTypeId()" /> 교통정보 보기
        <input type="checkbox" id="chkBicycle" onclick="setOverlayMapTypeId()" /> 자전거도로 정보 보기
    </p> -->


    <!-- <script>
        var map = new kakao.maps.Map(document.getElementById('map'), {
            center: new kakao.maps.LatLng(37.5665, 126.9780),
            level: 5
        });

        // 고지도 이미지 오버레이
        var overlayContent = document.createElement('div');
        overlayContent.className = 'custom-overlay';
        overlayContent.innerHTML = '<img src="assets/01.jpg">';

        var overlay = new kakao.maps.CustomOverlay({
            position: new kakao.maps.LatLng(37.5665, 126.9780), // 지도 중심
            content: overlayContent,
            xAnchor: 0.5,
            yAnchor: 0.5
        });

        overlay.setMap(map);
    </script>
     -->

     <script>
        var map = new kakao.maps.Map(document.getElementById('map'), {
            center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울 중심
            level: 5
        });

        // ✅ 고지도 위치 (예: 경복궁)
        var historicalMapPosition = new kakao.maps.LatLng(37.603570017604, 126.94933602271);

        // ✅ 고지도 이미지 URL
        var imageUrl = 'https://upload.wikimedia.org/wikipedia/commons/1/11/%EB%8F%84%EC%84%B1%EB%8F%84.jpg';

        // ✅ CustomOverlay를 사용하여 이미지 추가
        var overlayDiv = document.createElement('div');
        overlayDiv.style.position = 'absolute';
        overlayDiv.style.background = `url(${imageUrl}) no-repeat center`;
        overlayDiv.style.backgroundSize = 'cover';
        overlayDiv.style.opacity = '0.7';
        overlayDiv.style.zIndex = '10';
        overlayDiv.style.transform = 'scaleX(-1) scaleY(-1)'; /* ✅ 상하 반전 */



        var overlay = new kakao.maps.CustomOverlay({
            map: map,
            position: historicalMapPosition, // ✅ 특정 좌표에 고정
            content: overlayDiv,
            xAnchor: 0.5,
            yAnchor: 0.5
        });

        // ✅ 줌 레벨에 따라 이미지 크기 조절
        function updateOverlaySize() {
            var zoomLevel = map.getLevel(); // 현재 줌 레벨
            var scaleFactor = Math.pow(2, 5 - zoomLevel); // 줌 레벨 5를 기준으로 크기 조정

            var size = 1870 * scaleFactor; // 이미지 기본 크기 * 스케일 적용
            overlayDiv.style.width = size + 'px';
            overlayDiv.style.height = size + 'px';
        }

        // ✅ 줌 변경 시 이벤트 추가 (크기 조절)
        kakao.maps.event.addListener(map, 'zoom_changed', updateOverlaySize);

        // ✅ 초기 크기 조절
        updateOverlaySize();
    </script>
     <!-- <script>
        var map = new kakao.maps.Map(document.getElementById('map'), {
            center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울 중심
            level: 5
        });

        // ✅ 고지도 이미지 URL
        var imageUrl = 'https://upload.wikimedia.org/wikipedia/commons/1/11/%EB%8F%84%EC%84%B1%EB%8F%84.jpg';

        // ✅ CustomOverlay를 사용하여 이미지 추가
        var overlayDiv = document.createElement('div');
        overlayDiv.style.position = 'absolute';
        overlayDiv.style.width = '200px'; // 초기 크기 (줌 레벨 5 기준)
        overlayDiv.style.height = '200px';
        overlayDiv.style.background = `url(${imageUrl}) no-repeat center`;
        overlayDiv.style.backgroundSize = 'cover';
        overlayDiv.style.opacity = '0.7';
        overlayDiv.style.zIndex = '10';
        overlayDiv.style.transform = 'scaleY(-1)'; /* ✅ 상하 반전 */

        var overlay = new kakao.maps.CustomOverlay({
            map: map,
            position: map.getCenter(), // 초기 중심 좌표에 위치
            content: overlayDiv,
            xAnchor: 0.5,
            yAnchor: 0.5
        });

        // ✅ 줌 레벨에 따라 이미지 크기 조절
        function updateOverlaySize() {
            var zoomLevel = map.getLevel(); // 현재 줌 레벨
            var scaleFactor = Math.pow(2, 5 - zoomLevel); // 줌 레벨 5를 기준으로 크기 조정

            var size = 200 * scaleFactor; // 이미지 기본 크기 * 스케일 적용
            overlayDiv.style.width = size + 'px';
            overlayDiv.style.height = size + 'px';

            overlay.setPosition(map.getCenter()); // 위치 유지
        }

        // ✅ 줌 변경 및 이동 이벤트 추가
        kakao.maps.event.addListener(map, 'zoom_changed', updateOverlaySize);
        kakao.maps.event.addListener(map, 'center_changed', function() {
            overlay.setPosition(map.getCenter()); // 지도 중심 이동 시에도 유지
        });

        // ✅ 초기 크기 조절
        updateOverlaySize();
    </script> -->
    <!-- <script>
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
            mapOption = {
                center: new kakao.maps.LatLng(37.57319, 126.96658), // 지도의 중심좌표
                level: 7 // 지도의 확대 레벨
            };

        var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

        // 지도 타입 정보를 가지고 있을 객체입니다
        // map.addOverlayMapTypeId 함수로 추가된 지도 타입은
        // 가장 나중에 추가된 지도 타입이 가장 앞에 표시됩니다
        // 이 예제에서는 지도 타입을 추가할 때 지적편집도, 지형정보, 교통정보, 자전거도로 정보 순으로 추가하므로
        // 자전거 도로 정보가 가장 앞에 표시됩니다
        var mapTypes = {
            terrain: kakao.maps.MapTypeId.TERRAIN,
            traffic: kakao.maps.MapTypeId.TRAFFIC,
            bicycle: kakao.maps.MapTypeId.BICYCLE,
            useDistrict: kakao.maps.MapTypeId.USE_DISTRICT
        };

        // 체크 박스를 선택하면 호출되는 함수입니다
        function setOverlayMapTypeId() {
            var chkTerrain = document.getElementById('chkTerrain'),
                chkTraffic = document.getElementById('chkTraffic'),
                chkBicycle = document.getElementById('chkBicycle'),
                chkUseDistrict = document.getElementById('chkUseDistrict');

            // 지도 타입을 제거합니다
            for (var type in mapTypes) {
                map.removeOverlayMapTypeId(mapTypes[type]);
            }

            // 지적편집도정보 체크박스가 체크되어있으면 지도에 지적편집도정보 지도타입을 추가합니다
            if (chkUseDistrict.checked) {
                map.addOverlayMapTypeId(mapTypes.useDistrict);
            }

            // 지형정보 체크박스가 체크되어있으면 지도에 지형정보 지도타입을 추가합니다
            if (chkTerrain.checked) {
                map.addOverlayMapTypeId(mapTypes.terrain);
            }

            // 교통정보 체크박스가 체크되어있으면 지도에 교통정보 지도타입을 추가합니다
            if (chkTraffic.checked) {
                map.addOverlayMapTypeId(mapTypes.traffic);
            }

            // 자전거도로정보 체크박스가 체크되어있으면 지도에 자전거도로정보 지도타입을 추가합니다
            if (chkBicycle.checked) {
                map.addOverlayMapTypeId(mapTypes.bicycle);
            }

        }  
    </script> -->
</body>

</html>